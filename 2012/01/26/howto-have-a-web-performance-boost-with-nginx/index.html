<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="keywords" content="howto, nginx, admin">
        <meta name="description" content="Contents 1 Why Nginx? 2 Get it! 3 Basic configuration 4 vHost configuration 5 Nginx as proxy server 6 Benchmarks 6.1 ab (apache suite) benchmark 6.1.1 lighttpd 6.1.2 nginx 6.2 tools.pingdom.com benchmark 7 Literature Why Nginx? Since I wanted to improve my ...">
        <title>HowTo: Have a web performance boost with Nginx - blog.dornea.nu</title>
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.png">
        <link rel="stylesheet" href="/css/ipython.min.css" type="text/css" />
        <link rel="stylesheet" href="../../../../theme/css/bootstrap.min.css" type="text/css" />
        <link rel="stylesheet" href="../../../../theme/font-icons/style.min.css" type="text/css" />
        <link rel="stylesheet" href="../../../../theme/css/niu2.min.css" type="text/css" />
        <link rel="stylesheet" href="/css/custom.css" type="text/css" />
		
        
        <link rel="canonical" href="../../../../2012/01/26/howto-have-a-web-performance-boost-with-nginx" />
        <script type="text/javascript">window.onload=function(){};</script>
        <!--[if lt IE 9]>
            <script src="../../../../theme/js/html5shiv.js"></script>
            <script src="../../../../theme/js/respond.min.js"></script>
        <![endif]-->
    </head>
    <body> 
        <div id="body-header">
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="col-md-12">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="../../../..">
                            <i class="icon-home"></i>blog.dornea.nu
                        </a>
                    </div>
                    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
                        <ul class="nav navbar-nav">
                            <li><a href="http://dornea.nu" title="about">
                                <i class="icon-user"></i>about</a>
                            </li>
                            <li><a href="/archives.html" title="archives">
                                <i class="icon-archive"></i>archives</a>
                            </li>
                            <li><a href="/tags.html" title="tags">
                                <i class="icon-tag"></i>tags</a>
                            </li>
                            <li><a href="/feeds/rss.xml" title="feeds">
                                <i class="icon-rss"></i>feeds</a>
                            </li>
                        <!-- category dropdown list -->
                        <li class="dropdown">
                           <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="icon-folder-open"></i>category<b class="caret"></b>
                           </a>
                           <ul class="dropdown-menu">
                               <li><a href="../../../../category/blog">
                                      <i class="icon-pencil"></i>blog
                                      (154)</a></li>
                               <li><a href="../../../../category/notes">
                                      <i class="icon-book"></i>notes
                                      (8)</a></li>
                           </ul>
                        </li>
                        <!--  self defined dropdown list -->
                        </ul>
                        
                        <!-- right nav bar -->
                        <ul class="nav navbar-nav navbar-right">
                        <!-- google custom search -->
                        <li>
                        <div id="niu2-cse-wrapper">
                            <div id="niu2-cse-header-box" class="navbar-form navbar-nav">
                                <form action="http://google.com/cse">
                                    <input type="hidden" name="cx" value="008508447409818574933:pxyxuhrgnxi" />
                                    <input type="hidden" name="ie" value="UTF-8" />
                                    <div class="form-group">
                                        <input id="niu2-cse-search-input" class="niu2-cse-header form-control" 
                                            type="text" name="q" 
                                            placeholder="Press enter to search ..."/>
                                    </div>
                                </form>
                           </div>
                           <div id="niu2-cse-ctrl-box" class="navbar-nav">
                            <i id="niu2-cse-search-image" class="icon-search navbar-nav"></i><span id="niu2-cse-search-text">Search</span>
                           </div>
                       </div>
                       </li>
                       </ul>
                    </nav>
                </div>
            </div>
<style>
    #banner{
        background-image:url("../../../..//images/header.jpg");
    }   
</style>

<div id="banner">
    <div class="container">
        <div class="copy">
            <h2>blog.dornea.nu</h2>
                <p class="intro">Hack, code and drink some țuică. Personal blog of Victor Dorneanu.</p>
        </div>
    </div>
</div>
            <!-- End Banner -->
        </div>

        <div id="body-content">
            <div class="col-md-8 col-md-offset-2">
                <h1 id="content-heading">HowTo: Have a web performance boost with Nginx</h1>
            </div>
            <div id="niu2-left-container" class="col-md-6 col-md-offset-2 with-right-border">
                <div id="niu2-main-content">
                    <div class="toc_wrap_right toc_transparent no_bullets" id="toc_container">
<p class="toc_title">
    Contents
  </p>
<ul class="toc_list">
<li>
<a href="#Why_Nginx"><span class="toc_number toc_depth_1">1</span> Why Nginx?</a>
</li>
<li>
<a href="#Get_it"><span class="toc_number toc_depth_1">2</span> Get it!</a>
</li>
<li>
<a href="#Basic_configuration"><span class="toc_number toc_depth_1">3</span> Basic configuration</a>
</li>
<li>
<a href="#vHost_configuration"><span class="toc_number toc_depth_1">4</span> vHost configuration</a>
</li>
<li>
<a href="#Nginx_as_proxy_server"><span class="toc_number toc_depth_1">5</span> Nginx as proxy server</a>
</li>
<li>
<a href="#Benchmarks"><span class="toc_number toc_depth_1">6</span> Benchmarks</a><ul>
<li>
<a href="#ab_apache_suite_benchmark"><span class="toc_number toc_depth_2">6.1</span> ab (apache suite) benchmark</a><ul>
<li>
<a href="#lighttpd"><span class="toc_number toc_depth_3">6.1.1</span> lighttpd</a>
</li>
<li>
<a href="#nginx"><span class="toc_number toc_depth_3">6.1.2</span> nginx</a>
</li>
</ul>
</li>
<li>
<a href="#toolspingdomcom_benchmark"><span class="toc_number toc_depth_2">6.2</span> tools.pingdom.com benchmark</a>
</li>
</ul>
</li>
<li>
<a href="#Literature"><span class="toc_number toc_depth_1">7</span> Literature</a>
</li>
</ul>
</div>
<h1 id="de1fe63d6afc849c0d4bab0d15576375"><span id="Why_Nginx">Why Nginx?</span></h1>
<p>Since I wanted to improve my sites load speed I thought I should look around for some lighttpd-alternatives which I have used for so many years. The really annoying thing about ”lighttpd” is its configuration syntax. I don’t think it’s comprehensive nor easy to learn. Besides that I wanted to have a configuration where ”memcahed” plays a major role: Serve static content (html) from memcache. Lighttpd does have some modules/tutorials how to interact with ”memcached” but I couldn’t find any working configuration. Frustration but also curiosity brought me to ”Nginx”. <!--more--></p>
<p>According to the author Nginx ”is an HTTP and reverse proxy server, as well as a mail proxy server”. I thought I should give it a try and test its performance against Lighttpd. Meanwhile I’m using Lighttpd ”’AND”’ Nginx on my server due to some regexp issue that have to be solved very soon. In that case Nginx acts a a proxy server (see below for configuration stuff).</p>
<h1 id="d315961f10d8f48561baf0b483b8334b"><span id="Get_it">Get it!</span></h1>
<p>Before going further you should have the latest (stable) available Nginx version. If you use Debian make sure, you add following to your ”/etc/apt/sources.list”:</p>
<pre class="brush:plain">deb-src http://nginx.org/packages/debian/ squeeze nginx</pre>
<p>On my system I have currently version ”1.0.9-1” installed.</p>
<h1 id="416206518e27ed2ec8b8e0876078af35"><span id="Basic_configuration">Basic configuration</span></h1>
<p>The main file for this part is ”/etc/nginx/nginx.conf”. This is my ”nginx.conf”:</p>
<pre class="brush:plain">user www-data;
worker_processes  5;
worker_rlimit_nofile 8192;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events {
    worker_connections  4096;
    use epoll;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;
    keepalive_requests    50;
    keepalive_timeout     300 300;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    #cp_nopush     on;

    # Compression
    gzip on;
    gzip_buffers 16 8k;
    gzip_comp_level 2;
    gzip_http_version 1.1;
    gzip_min_length 10;
    gzip_types text/plain text/css application/x-javascript text/xml;
    gzip_vary on;
    gzip_proxied any;
    gzip_disable "MSIE [1-6].";

    include /etc/nginx/conf.d/*.conf;
}</pre>
<p>I won’t explain every line since this is not what I’m supposed to do <img alt=":)" class="wp-smiley img-responsive" src="http://dornea.nu/wp-includes/images/smilies/icon_smile.gif"/> Please have a look at the links at the end of this article for additional links.</p>
<h1 id="7f167270d33e2ada55cd790e9aff9edb"><span id="vHost_configuration">vHost configuration</span></h1>
<p>Well this is probably the most interesting part. You should have a configuration file per each vhost located at ”/etc/nginx/conf.d/”. In my case the configuration was adapted to Drupals system and needs. Let’s have a look:</p>
<pre class="brush:plain">server {
        listen 80;
        server_name dornea.nu;

        root /var/www/sites/dornea.nu/htdocs/current; ## &lt;-- Your only path reference.

        ## Drupal Boost with nginx 
        set $boost "";
        set $boost_query "_";

        if ( $request_method = GET ) { 
                set $boost G;
        }

        if ($http_cookie !~ "DRUPAL_UID") {
            set $boost "${boost}D";
        }

        if ($query_string = "") {
            set $boost "${boost}Q";
        }

        if ( -f $document_root/cache/normal/$host$request_uri$boost_query.html ) {
            set $boost "${boost}F";
        }

        if ($boost = GDQF){
            rewrite ^.*$ /cache/normal/$host/$request_uri$boost_query.html break;
        }

        location = /favicon.ico {
                log_not_found off;
                access_log off;
        }

        location = /robots.txt {
                allow all;
                log_not_found off;
                access_log off;
        }

        # This matters if you use drush
        location = /backup {
                auth_basic            "Restricted";
                auth_basic_user_file  /etc/lighttpd/lighttpd_passwords.inc;
                #deny all;
        }

        # Very rarely should these ever be accessed outside of your lan
        location ~* .(txt|log)$ {
                allow 192.168.0.0/16;
                deny all;
        }

        location ~ ..*/.*.php$ {
                return 403;
        }

        location / {

                set $memcached_key "nginx:$request_uri";
                memcached_pass 127.0.0.1:11211;
                default_type       text/html;

                error_page 404 405 502 = @fallback;
                autoindex  on;
        }

        location @fallback {
                try_files $uri @rewrite;
        } 

        location @rewrite {
                # Some modules enforce no slash (/) at the end of the URL
                # Else this rewrite block wouldn't be needed (GlobalRedirect)
                #rewrite ^/system/test/(.*)$     /index.php?q=system/test/$1;
                #rewrite ^/system/files/(.*)$    /index.php?q=system/files/$1;
                rewrite ^/sitemap.xml$          /index.php?q=sitemap.xml;

                rewrite ^/(.*)$                 /index.php?q=$1;
        }

        location ~ .php$ {
                fastcgi_split_path_info ^(.+.php)(/.+)$;
                #NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
                include fastcgi_params;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                fastcgi_param  VERIFIED $ssl_client_verify;
                fastcgi_param  DN $ssl_client_s_dn;
                fastcgi_intercept_errors on;
        }

        # Fighting with ImageCache? This little gem is amazing.
        location ~ ^/sites/.*/files/imagecache/ {
                try_files $uri @rewrite;
        }
        # Catch image styles for D7 too.
        location ~ ^/sites/.*/files/styles/ {
                try_files $uri @rewrite;
        }

        location ~* .(js|css|png|jpg|jpeg|gif|ico)$ {
                expires 24h;
                log_not_found off;
        }
}</pre>
<p>Having Drupals boost module enabled you should have static pages on your server which will be served by the memcache daemon. At the beginning of the configuration nginx checks if any static content should be served at all (ist the user logged in? etc.) If there is a html file which correlates with the URI then nginx will load the files content from memcache. If not: the PHP script will be executed. Speaking of PHP.. Lets have a look at ”/etc/nginx/”:</p>
<pre class="brush:plain"># cat /etc/nginx/fastcgi_params 
fastcgi_pass   unix:/tmp/fcgi.sock;
fastcgi_param  QUERY_STRING       $query_string;
fastcgi_param  REQUEST_METHOD     $request_method;
fastcgi_param  CONTENT_TYPE       $content_type;
fastcgi_param  CONTENT_LENGTH     $content_length;
fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
fastcgi_param  REQUEST_URI        $request_uri;
fastcgi_param  DOCUMENT_URI       $document_uri;
fastcgi_param  DOCUMENT_ROOT      $document_root;
fastcgi_param  SERVER_PROTOCOL    $server_protocol;
fastcgi_param  GATEWAY_INTERFACE  CGI/1.1;
fastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;
fastcgi_param  REMOTE_ADDR        $remote_addr;
fastcgi_param  REMOTE_PORT        $remote_port;
fastcgi_param  SERVER_ADDR        $server_addr;
fastcgi_param  SERVER_PORT        $server_port;
fastcgi_param  SERVER_NAME        $server_name;

fastcgi_index  index.php;

fastcgi_param  REDIRECT_STATUS    200;</pre>
<p>I use a socket instead of child processes. The socket can be created using ”/etc/init.d/fastcgi”:</p>
<pre class="brush:plain"># cat /etc/init.d/fastcgi 
#!/bin/sh

### BEGIN INIT INFO
# Provides:          fastcgi
# Required-Start:    $local_fs $remote_fs $network $syslog
# Required-Stop:     $local_fs $remote_fs $network $syslog
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: starts the FastCGI server
# Description:       starts spawn-fcgi using start-stop-daemon
### END INIT INFO

PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
DAEMON=/usr/local/bin/php-fastcgi

test -x $DAEMON || exit 0

set -e

RETVAL=0
case "$1" in
  start)
    $DAEMON
    RETVAL=$?
  ;;
  stop)
    killall -9 php5-cgi
    RETVAL=$?
  ;;
  restart)
    killall -9 php5-cgi
    $DAEMON
    RETVAL=$?
  ;;
  *)
    echo "Usage: php-fastcgi {start|stop|restart}"
    exit 1
  ;;
esac
exit $RETVAL</pre>
<p>”php-fastcgi” is located at /usr/local/bin/:</p>
<pre class="brush:plain"># cat /usr/local/bin/php-fastcgi 
#!/bin/sh
/usr/bin/spawn-fcgi -F 1 -C 10 -a 127.0.0.1 -s /tmp/fcgi.sock -u www-data -g www-data -f "/usr/bin/php5-cgi -c /etc/php5/cgi/php.ini" -P /var/run/fastcgi-php.pid</pre>
<h1 id="20849d6369623ae5549ab46ec8cbcd43"><span id="Nginx_as_proxy_server">Nginx as proxy server</span></h1>
<p>As already mentioned nginx can be used as a proxy server. In my case I need nginx to redirect requests on a certain subdomain to ”lighttpd” listening to a local interface. The configuration:</p>
<pre class="brush: plain">## dl.dornea.nu
server {
    listen 80;
    server_name dl.dornea.nu;
    root /var/www/sites/dl.dornea.nu/htdocs/current;
    rewrite_log on;
    index index.php index.html;

    location / {
        #index index.php index.html;
        proxy_pass         http://127.0.0.1:8080/;
        proxy_redirect     off;
        proxy_set_header   Host             $host;
        proxy_set_header   X-Real-IP        $remote_addr;
        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
        proxy_connect_timeout      90;
        proxy_send_timeout         90;
        proxy_read_timeout         90;

        proxy_buffer_size          4k;
        proxy_buffers              4 32k;
        proxy_busy_buffers_size    64k;
        proxy_temp_file_write_size 64k;
    } 

    location ~* .(js|css|png|jpg|jpeg|gif|ico)$ {
        expires 24h;
        log_not_found off;
    }
}</pre>
<p>All requests to ”’dl.dornea.nu/*”’ will be redirected to ”’http://127.0.0.1:8080”’. Isn’t that simple? Simple configuration, no need for magic!</p>
<h1 id="0139c29ede5430437868e80474ff6a41"><span id="Benchmarks">Benchmarks</span></h1>
<h2 id="bb7bec9ae5725dad1d4ecd674e695626"><span id="ab_apache_suite_benchmark">ab (apache suite) benchmark</span></h2>
<h3 id="7872d0a8d78c4619c5081356d4c146d8"><span id="lighttpd">lighttpd</span></h3>
<pre class="brush: plain"># ab -n 1000 -c 2 http://dornea.nu/
This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking dornea.nu (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Completed 1000 requests
Finished 1000 requests

Server Software:        lighttpd/1.4.28
Server Hostname:        dornea.nu
Server Port:            80

Document Path:          /
Document Length:        48134 bytes

Concurrency Level:      2
Time taken for tests:   1438.721 seconds
Complete requests:      1000
Failed requests:        2
   (Connect: 0, Receive: 0, Length: 2, Exceptions: 0)
Write errors:           0
Total transferred:      48619020 bytes
HTML transferred:       48133998 bytes
Requests per second:    0.70 [#/sec] (mean)
Time per request:       2877.441 [ms] (mean)
Time per request:       1438.721 [ms] (mean, across all concurrent requests)
Transfer rate:          33.00 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       36   41  18.8     39     271
Processing:  1369 2836 1314.7   2641   15499
Waiting:     1215 2649 1306.8   2467   15346
Total:       1406 2877 1314.6   2680   15536

Percentage of the requests served within a certain time (ms)
  50%   2680
  66%   2903
  75%   3062
  80%   3208
  90%   3841
  95%   5057
  98%   6924
  99%   9111
 100%  15536 (longest request)</pre>
<h3 id="ee434023cf89d7dfb21f63d64f0f9d74"><span id="nginx">nginx</span></h3>
<pre class="brush: plain"># ab -n 1000 -c 2 http://dornea.nu/
This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;
Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/
Licensed to The Apache Software Foundation, http://www.apache.org/

Benchmarking dornea.nu (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
Completed 500 requests
Completed 600 requests
Completed 700 requests
Completed 800 requests
Completed 900 requests
Completed 1000 requests
Finished 1000 requests

Server Software:        nginx/1.0.9
Server Hostname:        dornea.nu
Server Port:            80

Document Path:          /
Document Length:        48216 bytes

Concurrency Level:      2
Time taken for tests:   133.533 seconds
Complete requests:      1000
Failed requests:        0
Write errors:           0
Total transferred:      48451000 bytes
HTML transferred:       48216000 bytes
Requests per second:    7.49 [#/sec] (mean)
Time per request:       267.065 [ms] (mean)
Time per request:       133.533 [ms] (mean, across all concurrent requests)
Transfer rate:          354.34 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:       36   42  18.5     39     268
Processing:   190  225  43.3    212     483
Waiting:       36   43  17.9     40     270
Total:        227  267  52.1    252     713

Percentage of the requests served within a certain time (ms)
  50%    252
  66%    259
  75%    262
  80%    269
  90%    299
  95%    371
  98%    471
  99%    481
 100%    713 (longest request)</pre>
<h2 id="c511823b717919b7612f5a9e4aa4ec59"><span id="toolspingdomcom_benchmark">tools.pingdom.com benchmark</span></h2>
<p>lighttpd</p>
<p>http://dl.dornea.nu/img/2012/270/pingdom_nl_dornea.nu_lighttpd.png</p>
<p>nginx</p>
<p>http://dl.dornea.nu/img/2012/270/pingdom_nl_dornea.nu_nginx.png</p>
<h1 id="f1506b6384d089277f61a768904fcaaa"><span id="Literature">Literature</span></h1>
<ul>
<li>Nginx <ul>
<li>http://nginx.org/</li>
<li>http://wiki.nginx.org/Main</li>
</ul>
</li>
<li>Basic Configuration <ul>
<li>http://wiki.nginx.org/Configuration</li>
<li>https://calomel.org/nginx.html</li>
</ul>
</li>
</ul>
                </div>
<hr/>
<div style="float:left;">
	Prev: <a href="../../../../2011/12/19/need-any-sh3ll" align='left'>
	 Need any sh3ll?
	</a>
</div>
<div style="float:right;">
    Next: <a href="../../../../2012/04/01/howto-split-mp3s-by-silence-detection-using-mp3splt" align='right'>
	 HowTo: Split MP3s by silence detection using mp3splt
	</a>
</div>
</p>

                <!-- Add comments -->
<div id="content-comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname="dorneanu";
				var disqus_identifier = 'howto-have-a-web-performance-boost-with-nginx';
			var disqus_url = '../../../../2012/01/26/howto-have-a-web-performance-boost-with-nginx';

		var disqus_config = function () {
			this.language = "en";
		};
 
        
        (function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src="//"+disqus_shortname+".disqus.com/embed.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)})();</script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div> 
            </div>
            <div class="niu2-right-container col-md-2">
                <div id="niu2-sidebar-meta" class="niu2-sidebar">
                    <div class="niu2-sidebar-label"><i class="icon-calendar"></i>Published:</div>
                    <div class="niu2-sidebar-value">2012-01-26 00:00</div>
                    <div class="niu2-sidebar-label"><i class="icon-pencil"></i>category:</div>
                    <div class="niu2-sidebar-value"><a href="../../../../category/blog">blog</a></div>
                    <div class="niu2-sidebar-label"><i class="icon-tag"></i>Tag:</div>
                    <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="../../../../tag/howto/">howto</a><sup>20</sup></div>
                    <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="../../../../tag/nginx/">nginx</a><sup>2</sup></div>
                    <div class="niu2-sidebar-inter-value niu2-sidebar-tag"><a href="../../../../tag/admin/">admin</a><sup>21</sup></div>
                </div>

                <div id="niu2-sidebar-toc" class="niu2-sidebar" data-status="closed">
                    <div class="niu2-sidebar-label">
                        <i id="niu2-sidebar-toc-ctrl" class="icon-open-tocs"></i>Table of contents
                    </div>
                    <ul id="niu2-sidebar-toc-list">
                        <li><a href="#content-heading">HowTo: Have a web performance boost with Nginx</a></li>
                        <li><a href='#de1fe63d6afc849c0d4bab0d15576375'>Why Nginx?</a></li><li><a href='#d315961f10d8f48561baf0b483b8334b'>Get it!</a></li><li><a href='#416206518e27ed2ec8b8e0876078af35'>Basic configuration</a></li><li><a href='#7f167270d33e2ada55cd790e9aff9edb'>vHost configuration</a></li><li><a href='#20849d6369623ae5549ab46ec8cbcd43'>Nginx as proxy server</a></li><li><a href='#0139c29ede5430437868e80474ff6a41'>Benchmarks</a><ul><li><a href='#bb7bec9ae5725dad1d4ecd674e695626'>ab (apache suite) benchmark</a><ul><li><a href='#7872d0a8d78c4619c5081356d4c146d8'>lighttpd</a></li><li><a href='#ee434023cf89d7dfb21f63d64f0f9d74'>nginx</a></li></ul></li><li><a href='#c511823b717919b7612f5a9e4aa4ec59'>tools.pingdom.com benchmark</a></li></ul></li><li><a href='#f1506b6384d089277f61a768904fcaaa'>Literature</a></li>
                        <li><a href="#content-comments">Comments</a></li>
                    </ul>
                </div>
            </div>
            <div id="niu2-toolbar">
                <ul class="list-unstyled">
                    <li><a id="niu2-toolbar-ctrlsidebar" href="#" title="Hide Sidebar"><i class="icon-3x icon-hide-sidebar"></i></a></li>
                </ul>
                <div id="niu2-toolbar-showsidebar" data-title="Show Sidebar"></div>
                <div id="niu2-toolbar-github" data-repo=""></div>
                <div id="niu2-toolbar-bitbucket" data-repo=""></div>
            </div>
            <div id="niu2-toc" data-style="fixed"></div>
        </div>

        <div class="niu2-footer">
            <div id="body-footer" class="col-md-6 col-md-offset-2">
                <hr/>
                <p>
                    Powered by <a href="https://github.com/getpelican/pelican">Pelican</a>, 
                    <a href="https://github.com/mawenbao/niu-x2-sidebar">theme</a> built with <a href="https://github.com/twbs/bootstrap">Bootstrap3</a>
                    by <a href="https://blog.mawenbao.com">Ma Wenbao</a>, icons by 
                    <a href="https://fortawesome.github.io/Font-Awesome">Font Awesome</a>.
                </p>
                <p>
                    © 2008 - 2016
                    <a class="niu2-footer-link" href="../../../..">Victor Dorneanu</a>
                </p>
                <p class="niu2-icons">
                    <a class="niu2-footer-icon" href="https://pgp.mit.edu/pks/lookup?op=get&search=0x18F1AD46FB05E1B7" title="my public key">
                        <i class="icon-key icon-lg"></i>
                    </a>
                    <a class="niu2-footer-icon" href="mailto: no-spam ÄATT dornea DOT nu" title="my email address">
                        <i class="icon-envelope-o icon-lg"></i>
                    </a>
                    <a class="niu2-footer-icon" href="http://github.com/dorneanu" title="my github page">
                        <i class="icon-github-alt icon-lg"></i>
                    </a>
                    <a class="niu2-footer-icon" href="/feeds/rss.xml" title="subscribe my blog">
                        <i class="icon-rss icon-lg"></i>
                    </a>
                </p>
            </div>
        </div>

        <script type="text/javascript">
            var _gaq=_gaq||[];
            _gaq.push(["_setAccount","UA-7161767-3"]);
            _gaq.push(["_trackPageview"]);
            (function(){
                var b=document.createElement("script");
                b.type="text/javascript";
                b.async=true;
                b.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";
                var a=document.getElementsByTagName("script")[0];
                a.parentNode.insertBefore(b,a)
            })();
        </script>
        <div id="niu2-pygments" data-theme="github"></div>
        <div id="niu2-lazy-load" data-loading-txt="Loading image" data-loading-icon="icon-spin icon-spinner"></div>
        <div id="niu2-toolbar-load" data-loading-icon="icon-spin icon-4x icon-spinner"></div>
        <script type="text/javascript" src="../../../../theme/js/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="../../../../theme/js/niu2.min.js"></script>
        <script type="text/javascript" src="../../../../theme/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/js/custom.js"></script>
        <script type="text/javascript">
            onContentLoaded();
        </script>
    </body>
</html>